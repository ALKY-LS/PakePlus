{"name":"TexSys","url":"https://pub-9c967cb27cc64e029cee1d10d4e7f637.r2.dev/修改文本.html","showName":"文本处理系统","appid":"xxxxalky","icon":"","iconRound":true,"state":true,"single":true,"injectJq":true,"tauriApi":false,"devbug":false,"version":"2.0.0","preview":"desktop","platform":["1-1"],"width":800,"height":600,"desc":"","jsFile":[],"filterCss":"","customJs":"// 保留 PakePlus 原有的调试输出\nconsole.log(\n  '%cbuild from PakePlus： https://github.com/Sjj1024/PakePlus',\n  'color:orangered;font-weight:bolder'\n)\n\n// very important, if you don't know what it is, don't touch it\n// 非常重要，不懂代码不要动，这里可以解决80%的问题，也可以生产1000+的bug\nconst hookClick = (e) => {\n  const origin = e.target.closest('a')\n  const isBaseTargetBlank = document.querySelector('head base[target=\"_blank\"]')\n  console.log('origin', origin, isBaseTargetBlank)\n  if (\n    (origin && origin.href && origin.target === '_blank') ||\n    (origin && origin.href && isBaseTargetBlank)\n  ) {\n    e.preventDefault()\n    console.log('handle origin', origin)\n    location.href = origin.href\n  } else {\n    console.log('not handle origin', origin)\n  }\n}\n\ndocument.addEventListener('click', hookClick, { capture: true })\n\n// —— 在这里开始新增：置顶按钮逻辑 ——\n\n;(async () => {\n  // 先尝试从全局注入的 Tauri API 拿窗口对象\n  let appWindow\n  if (window.__TAURI__ && window.__TAURI__.window) {\n    // 当 tauri.conf.json 中 build.withGlobalTauri = true 时可用\n    appWindow = window.__TAURI__.window.getCurrent()\n  } else {\n    // 否则走动态 import（需项目中已安装 @tauri-apps/api）\n    try {\n      const { appWindow: importedAppWindow } = await import('@tauri-apps/api/window')\n      appWindow = importedAppWindow\n    } catch (e) {\n      console.error('无法加载 Tauri 窗口 API，置顶功能不可用：', e)\n      return\n    }\n  }\n\n  // 创建按钮\n  const btn = document.createElement('button')\n  btn.id = 'tauri-pin-btn'\n  btn.textContent = '置顶'\n  btn.dataset.pinned = 'false'\n  Object.assign(btn.style, {\n    position: 'fixed',\n    top: '10px',\n    right: '10px',\n    zIndex: '9999',\n    padding: '6px 10px',\n    fontSize: '14px',\n    cursor: 'pointer'\n  })\n\n  btn.addEventListener('click', async () => {\n    const pinned = btn.dataset.pinned === 'true'\n    try {\n      await appWindow.setAlwaysOnTop(!pinned)\n      btn.dataset.pinned = String(!pinned)\n      btn.textContent = pinned ? '置顶' : '取消置顶'\n    } catch (e) {\n      console.error('置顶操作失败：', e)\n    }\n  })\n\n  document.body.appendChild(btn)\n})()\n","isHtml":false,"htmlPath":"","htmlFiles":[],"more":{"windows":{"label":"TexSys","title":"文本处理系统","url":"https://pub-9c967cb27cc64e029cee1d10d4e7f637.r2.dev/修改文本.html","userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Safari/537.36","width":800,"height":600,"theme":null,"resizable":true,"fullscreen":false,"maximized":false,"minWidth":400,"minHeight":300,"maxWidth":1920,"maxHeight":1080,"decorations":true,"transparent":false,"titleBarStyle":"Visible","visible":true,"focus":true,"closable":true,"minimizable":true,"maximizable":true,"alwaysOnTop":false,"alwaysOnBottom":false,"center":false,"skipTaskbar":false,"tabbingIdentifier":null,"parent":null,"dragDropEnabled":true,"browserExtensionsEnabled":false,"devtools":true,"contentProtected":false,"hiddenTitle":false,"incognito":false,"proxyUrl":null,"useHttpsScheme":false,"zoomHotkeysEnabled":false,"acceptFirstMouse":false,"create":false}},"phone":{"safeArea":{"top":0,"bottom":0,"left":0,"right":0},"header":{"show":false,"title":"","backgroundColor":"","color":"","fontSize":16,"fontWeight":"bold","loading":false,"toolBar":false,"toolBarBackgroundColor":"","toolBarColor":"","toolBarFontSize":16,"toolBarFontWeight":"bold"},"siderMenu":{"show":false,"width":0,"backgroundColor":"","color":"","fontSize":16,"fontWeight":"bold","title":"","titleColor":"","titleFontSize":16,"titleFontWeight":"bold"},"tabBar":{"show":false,"backgroundColor":"","color":"","activeColor":"","fontSize":16,"fontWeight":"bold","tabBarItem":[]}},"ios":{"name":"TexSys","showName":"文本处理系统","version":"2.0.0","webUrl":"https://pub-9c967cb27cc64e029cee1d10d4e7f637.r2.dev/修改文本.html","id":"xxxxalky.ios","icon":"./app-icon.png","desc":"PakePlus Project by 1024xiaoshen","pubBody":"PakePlus android build body","isHtml":false,"debug":false},"android":{"name":"TexSys","showName":"文本处理系统","version":"2.0.0","webUrl":"https://pub-9c967cb27cc64e029cee1d10d4e7f637.r2.dev/修改文本.html","id":"xxxxalky.android","icon":"./app-icon.png","input":"./app-icon.png","output":"./res","rounded":true,"copyTo":"./app/src/main/res","androidResDir":"./app/src/main/res","desc":"PakePlus Project by 1024xiaoshen","pubBody":"PakePlus android build body","isHtml":false,"debug":false},"desktop":{"name":"TexSys","showName":"文本处理系统","version":"2.0.0","id":"xxxxalky.desktop","desc":"新增了一键复制功能，高亮部分关键词广告","webUrl":"https://pub-9c967cb27cc64e029cee1d10d4e7f637.r2.dev/修改文本.html","iconPath":"../app-icon.png","inputPath":"../app-icon.png","tempPath":"./processed-image.png","icnsPath":"../src-tauri/icons/icon.icns","pubBody":"新增了一键复制功能，高亮部分关键词广告","isHtml":false,"single":true,"state":true,"injectJq":false,"tauriApi":false,"debug":false}}